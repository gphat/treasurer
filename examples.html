---
layout: inner
title: Treasurer - Examples
---
<div class="container" data-spy="scroll" data-target=".nav-example">
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-md-3">
      <div class="affix">
        <ul class="nav nav-stacked nav-example">
          <li>
            <a href="#overview">Overview</a>
          </li>
          <li>
            <a href="#versions">Versions</a>
          </li>
          <li>
            <a href="#projects">Projects</a>
            <ul class="nav">
              <li><a href="#projects-create">Create</a></li>
              <li><a href="#projects-delete">Delete</a></li>
              <li><a href="#projects-getById">Get By Id</a></li>
              <li><a href="#projects-getAll">Get All</a></li>
            </ul>
          </li>
          <li>
            <a href="#artifacts">Artifacts</a>
            <ul class="nav">
              <li><a href="#artifacts-create">Create</a></li>
              <li><a href="#artifacts-delete">Delete</a></li>
              <li><a href="#artifacts-getById">Get By Id</a></li>
              <li><a href="#artifacts-getByDate">Get By Date</a></li>
              <li><a href="#artifacts-getAll">Get All</a></li>
              <li><a href="#artifacts-latest">Latest</a></li>
              <li><a href="#artifacts-offset">Offset</a></li>
            </ul>
          </li>
          <li>
            <a href="#deploys">Deploys</a>
            <ul class="nav">
              <li><a href="#deploys-create">Create</a></li>
              <li><a href="#deploys-delete">Delete</a></li>
              <li><a href="#deploys-getById">Get By Id</a></li>
              <li><a href="#deploys-getByDate">Get By Date</a></li>
              <li><a href="#deploys-getAll">Get All</a></li>
              <li><a href="#deploys-latest">Latest</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-md-9">
      <h2 id="overview">Overview</h2>
      <ul>
       <li>API calls that accept JSON expect a <code>Content-type</code> of <code>application/json</code>.</li>
       <li>Dates are expected to be in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format.
      </ul>
      <h2 id="versions">Versions</h2>
      <p>All API URLs begin with the version number. Currently there is only one version: <strong>1.0</strong>.</p>
      <hr>
      <h2 id="projects">Projects</h2>
      <p>Create a Project to represent a product, library, application or service. Anything that you create artifacts for such as jars, tarballs or executables.</p>
      <h3 id="projects-create">Create</h3>
      <p>Create a project.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -H "Content-type: application/json" -X POST http://localhost:9000/1.0/projects -d '{"name":"treasurer"}'
{% endhighlight %}

      <h3 id="projects-delete">Delete</h3>
      <p>Delete a project.</p>
      <div class="alert alert-warning"><strong>Note:</strong> Attemping to delete a project that has extant deploys or artifacts will result in an error. Delete those first!</div>
      <h4>Request</h4>
{% highlight bash %}
curl -X DELETE http://localhost:9000/1.0/projects/1
{% endhighlight %}

      <h3 id="project-getById">Get By Id</h3>
      <p>Returns the project associated with the provided id.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1
{% endhighlight %}

      <h3 id="projects-getAll">Get All</h3>
      <p>Returns a list of all projects as an array of objects.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects
{% endhighlight %}

      <hr>

      <h2 id="artifacts">Artifacts</h2>
      <p>An Artifact is the output of your build process, continuous integration or other toolchains. Use Treasurer to find out what's current or what was current last week.</p>
      <h3 id="artifacts-create">Create</h3>
      <p>Create an artifact.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -H "Content-type: application/json" -X POST http://localhost:9000/1.0/projects/1/artifacts -d '{"id":"7217c408", "version":"1.0.0", "url":"http://www.example.com/treasurer-1.0.0.zip"}'
{% endhighlight %}

      <h3 id="artifacts-delete">Delete</h3>
      <p>Delete an artifact.</p>
      <div class="alert alert-warning"><strong>Note:</strong> Attemping to delete an artifact that has extant deploys will result in an error. Delete those first!</div>
      <h4>Request</h4>
{% highlight bash %}
curl -X DELETE http://localhost:9000/1.0/projects/1/artifacts/7217c408
{% endhighlight %}

      <h3 id="artifacts-getById">Get By Id</h3>
      <p>Returns the artifact associated with the provided id.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/artifacts/7217c408
{% endhighlight %}

      <h3 id="artifacts-getByDate">Get By Date</h3>
      <p>Returns the artifact that was "latest" on a given date.</p>
      <div class="alert alert-info"><strong>Note:</strong> This expects ISO8601 dates.</div>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET "http://localhost:9000/1.0/projects/1/artifacts?date=2014-04-02T08:14:16Z"
{% endhighlight %}

      <h3 id="artifacts-getAll">Get All</h3>
      <p>Returns a list of all artifacts for a project as an array of objects.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/artifacts
{% endhighlight %}

      <h3 id="artifacts-latest">Latest</h3>
      <p>Returns the latest artifact for a project.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/artifacts/latest
{% endhighlight %}

      <h3 id="artifacts-offset">Offset</h3>
      <p>Returns the artifact offset from the current artifact. For example an offset of 1 returns the artifact before the latest one.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/artifacts?offset=1
{% endhighlight %}

      <hr>

      <h2 id="deploys">Deploys</h2>
      <p>Make note of the date, time and artifact information each time you deploy an artifact to a device. Query Treasurer to find out what's running where or what was running last Thursday.</p>

      <h3 id="artifacts-create">Create</h3>
      <p>Create a deploy.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -H "Content-type: application/json" -X POST http://localhost:9000/1.0/projects/1/deploys -d '{"artifactId":"7217c408", "device":"server-1234"}'
{% endhighlight %}

      <h3 id="artifacts-delete">Delete</h3>
      <p>Delete a deploy.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X DELETE http://localhost:9000/1.0/projects/1/deploys/1
{% endhighlight %}

      <h3 id="deploys-getById">Get By Id</h3>
      <p>Returns the deploy associated with the provided id.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/deploy/1
{% endhighlight %}

      <h3 id="deploys-getByDate">Get By Date</h3>
      <p>Returns the deploy that was active on a device on a given date.</p>
      <div class="alert alert-info"><strong>Note:</strong> This expects ISO8601 dates.</div>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET "http://localhost:9000/1.0/projects/1/deploys?device=service-1234&date=2014-04-02T08:14:16Z"
{% endhighlight %}

      <h3 id="deploys-latest">Latest</h3>
      <p>Returns the latest artifact for a project on a given device.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET "http://localhost:9000/1.0/projects/1/deploys?device=service-1234"
{% endhighlight %}

      <h3 id="deploys-getAll">Get All</h3>
      <p>Returns a list of all deploys for a project as an array of objects.</p>
      <h4>Request</h4>
{% highlight bash %}
curl -X GET http://localhost:9000/1.0/projects/1/deploys
{% endhighlight %}

   </div>
  </div>

  <hr>

  <footer>
    <p>&copy; Cory G Watson 2014</p>
  </footer>
</div> <!-- /container -->
